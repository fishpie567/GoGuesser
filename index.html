<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GlobeTrek Arena</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="brand">
          <img src="assets/images/logo.svg" alt="GlobeTrek" class="brand-logo" />
          <div>
            <h1>GlobeTrek Arena</h1>
            <p class="tagline">Guess smarter. Style harder. Compete fair.</p>
          </div>
        </div>
        <nav class="header-actions">
          <button id="profileButton" class="ghost-button">Profile</button>
          <button id="reportsButton" class="ghost-button">Reports</button>
        </nav>
      </header>

      <main class="app-main">
        <section class="panel game-panel">
          <div class="panel-header">
            <h2>Current Challenge</h2>
            <div class="mode-toggle">
              <span>Mode:</span>
              <label class="switch">
                <input type="checkbox" id="modeToggle" />
                <span class="slider"></span>
              </label>
              <span id="modeLabel">Casual</span>
            </div>
          </div>
          <p id="rankedStatus" class="ranked-status"></p>
          <div class="challenge-card">
            <div class="challenge-media">
              <img id="locationImage" src="" alt="Mystery location" />
              <div class="clue-chip" id="clueText"></div>
            </div>
            <div class="challenge-info">
              <div class="info-row">
                <div>
                  <p class="label">Round</p>
                  <p id="roundCounter" class="value">0 / 0</p>
                </div>
                <div>
                  <p class="label">Score</p>
                  <p id="scoreCounter" class="value">0</p>
                </div>
                <div>
                  <p class="label">Timer</p>
                  <p id="timerDisplay" class="value">00:00</p>
                </div>
              </div>
              <p id="locationDescription" class="description"></p>
              <div class="cta-row">
                <button id="hintButton" class="ghost-button">Show hint</button>
                <button id="guessButton" class="primary-button" disabled>Lock guess</button>
              </div>
              <div id="feedback" class="feedback"></div>
            </div>
          </div>
        </section>

        <section class="panel map-panel">
          <div class="panel-header">
            <h2>Drop your marker</h2>
            <div class="map-controls">
              <button id="centerButton" class="ghost-button">Reset view</button>
              <button id="revealButton" class="ghost-button" disabled>Reveal</button>
            </div>
          </div>
          <div id="map" class="map"></div>
        </section>

        <aside class="sidebar">
          <section class="panel profile-panel">
            <div class="panel-header">
              <h2>Explorer Profile</h2>
            </div>
            <div class="profile-card">
              <div class="avatar-wrapper" id="avatarWrapper"></div>
              <div class="profile-meta">
                <p id="displayName" class="profile-name"></p>
                <p id="rankLabel" class="rank-label"></p>
                <p id="coinsLabel" class="coins-label"></p>
              </div>
            </div>
            <div class="stat-grid">
              <div>
                <p class="label">Wins</p>
                <p id="winsStat" class="value">0</p>
              </div>
              <div>
                <p class="label">Losses</p>
                <p id="lossesStat" class="value">0</p>
              </div>
              <div>
                <p class="label">Best streak</p>
                <p id="streakStat" class="value">0</p>
              </div>
              <div>
                <p class="label">Current streak</p>
                <p id="currentStreakStat" class="value">0</p>
              </div>
            </div>
          </section>

          <section class="panel store-panel">
            <div class="panel-header">
              <h2>Cosmetic Forge</h2>
            </div>
            <div class="store-list" id="storeList"></div>
          </section>

          <section class="panel activity-panel">
            <div class="panel-header">
              <h2>Match History</h2>
              <button id="clearHistory" class="ghost-button">Clear</button>
            </div>
            <ul id="historyList" class="history-list"></ul>
          </section>
        </aside>
      </main>

      <footer class="app-footer">
        <p>
          Built for fair play explorers. Customize your look, climb the ranks and
          keep the arena clean.
        </p>
      </footer>
    </div>

    <!-- Profile Modal -->
    <dialog id="profileModal" class="modal">
      <form class="modal-content" id="profileForm">
        <header>
          <h3>Customize explorer</h3>
          <button type="button" class="ghost-button" id="closeProfile">Close</button>
        </header>
        <label class="field">
          <span>Display name</span>
          <input type="text" id="usernameInput" required maxlength="18" />
          <small class="hint"
            >Names must be clean. Offensive words are blocked automatically.</small
          >
        </label>
        <label class="field">
          <span>Profile picture</span>
          <div class="avatar-grid" id="avatarOptions"></div>
        </label>
        <label class="field">
          <span>Nameplate decoration</span>
          <div class="decoration-grid" id="decorationOptions"></div>
        </label>
        <menu class="dialog-actions">
          <button type="button" class="ghost-button" id="cancelProfile">Cancel</button>
          <button type="submit" class="primary-button">Save</button>
        </menu>
      </form>
    </dialog>

    <!-- Reports Modal -->
    <dialog id="reportsModal" class="modal">
      <form class="modal-content" id="reportForm">
        <header>
          <h3>Report explorer</h3>
          <button type="button" class="ghost-button" id="closeReport">Close</button>
        </header>
        <div class="report-section">
          <label class="field">
            <span>Who are you reporting?</span>
            <input
              type="text"
              id="reportTarget"
              name="reportTarget"
              placeholder="Username"
              required
            />
          </label>
          <label class="field">
            <span>Reason</span>
            <div class="radio-group">
              <label><input type="radio" name="reason" value="hacker" required /> Suspected hacking</label>
              <label><input type="radio" name="reason" value="googler" /> Googling answers</label>
              <label
                ><input type="radio" name="reason" value="discriminatory" />
                Discriminatory profile name/picture</label
              >
              <label><input type="radio" name="reason" value="other" /> Other</label>
            </div>
          </label>
          <label class="field">
            <span>Evidence / Notes</span>
            <textarea
              id="reportNotes"
              name="notes"
              rows="3"
              placeholder="Share what happened"
            ></textarea>
          </label>
        </div>
        <div class="report-footer">
          <button class="ghost-button" type="button" id="downloadReports">
            Download report log
          </button>
          <menu class="dialog-actions">
            <button type="button" class="ghost-button" id="cancelReport">Cancel</button>
            <button type="submit" class="primary-button">Submit report</button>
          </menu>
        </div>
      </form>
    </dialog>

    <template id="historyItemTemplate">
      <li class="history-item">
        <div class="badge"></div>
        <div class="details">
          <p class="summary"></p>
          <p class="meta"></p>
        </div>
      </li>
    </template>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
